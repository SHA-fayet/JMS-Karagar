{% extends "base.html" %}

{% block content %}
<div class="prison-card p-4">
    <h3 class="mb-4"><i class="fas fa-search"></i> Advanced Search</h3>
    
    <form method="GET" action="{{ url_for('search.search') }}">
        <div class="input-group mb-4">
            <input type="text" class="form-control bg-dark text-white" 
                   name="q" placeholder="Search..." value="{{ query }}">
            <select class="form-select bg-dark text-white" name="category">
                <option value="inmates" {% if category == 'inmates' %}selected{% endif %}>Inmates</option>
                <option value="visitors" {% if category == 'visitors' %}selected{% endif %}>Visitors</option>
                <option value="cells" {% if category == 'cells' %}selected{% endif %}>Cells</option>
            </select>
            <button type="submit" class="btn btn-prison">Search</button>
        </div>
    </form>

    {% if results %}
    <div class="search-results">
        <h5>Results ({{ results|length }} found)</h5>
        <div class="list-group">
            {% for result in results %}
            <div class="list-group-item bg-dark text-white">
                {% if category == 'inmates' %}
                    <i class="fas fa-user-lock me-2"></i>
                    {{ result.name }} - {{ result.crime }}
                {% elif category == 'visitors' %}
                    <i class="fas fa-users me-2"></i>
                    {{ result.visitor_name }} visiting {{ result.inmate_name }}
                {% else %}
                    <i class="fas fa-door-closed me-2"></i>
                    Cell {{ result.cell_number }} ({{ result.current_occupancy }}/{{ result.capacity }})
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}